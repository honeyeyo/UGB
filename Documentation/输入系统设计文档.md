# è¾“å…¥ç³»ç»Ÿè®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£åˆ†æäº†å½“å‰é¡¹ç›®ä¸­çš„ GloveBall è¾“å…¥é…ç½®ï¼Œå¹¶ä¸ºä¹’ä¹“çƒ VR æ¸¸æˆè®¾è®¡äº†ä¸“é—¨çš„è¾“å…¥ç³»ç»Ÿï¼ŒåŒ…æ‹¬è¾“å…¥åŠ¨ä½œæ˜ å°„ã€äº¤äº’è®¾è®¡å’Œå®ç°æ–¹æ¡ˆã€‚

## ğŸ” GloveBall è¾“å…¥é…ç½®åˆ†æ

### 1. ç°æœ‰è¾“å…¥æ˜ å°„ç»“æ„

**GloveBall.inputactions** åŒ…å«ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š

#### 1.1 Player åŠ¨ä½œæ˜ å°„

```json
PlayeråŠ¨ä½œç»„:
â”œâ”€â”€ Move (ç§»åŠ¨) - å·¦æ‰‹æ‘‡æ†
â”œâ”€â”€ ThrowLeft (å·¦æ‰‹æŠ•æ·) - å·¦æ‰‹æ‰³æœºé”®
â”œâ”€â”€ ThrowRight (å³æ‰‹æŠ•æ·) - å³æ‰‹æ‰³æœºé”®
â”œâ”€â”€ ShieldLeft (å·¦æ‰‹æŠ¤ç›¾) - å·¦æ‰‹æ¡æŒé”®
â”œâ”€â”€ ShieldRight (å³æ‰‹æŠ¤ç›¾) - å³æ‰‹æ¡æŒé”®
â”œâ”€â”€ Menu (èœå•) - å¼€å§‹é”®/èœå•é”®
â”œâ”€â”€ SnapTurnLeft (å·¦è½¬) - å³æ‰‹æ‘‡æ†
â”œâ”€â”€ SnapTurnLeftNoFree (å·¦è½¬æ— è‡ªç”±) - å·¦æ‰‹æ‘‡æ†
â”œâ”€â”€ SnapTurnRight (å³è½¬) - å³æ‰‹æ‘‡æ†
â””â”€â”€ SnapTurnRightNoFree (å³è½¬æ— è‡ªç”±) - å·¦æ‰‹æ‘‡æ†
```

#### 1.2 Spectator åŠ¨ä½œæ˜ å°„

```json
SpectatoråŠ¨ä½œç»„:
â”œâ”€â”€ TriggerLeft (å·¦æ‰‹è§¦å‘) - å·¦æ‰‹æ‰³æœºé”®
â”œâ”€â”€ TriggerRight (å³æ‰‹è§¦å‘) - å³æ‰‹æ‰³æœºé”®
â””â”€â”€ Menu (èœå•) - å¼€å§‹é”®/èœå•é”®
```

### 2. è¾“å…¥è®¾å¤‡æ”¯æŒ

**XR æ§åˆ¶æ–¹æ¡ˆ**:

- å·¦æ‰‹ XR æ§åˆ¶å™¨ (å¿…éœ€)
- å³æ‰‹ XR æ§åˆ¶å™¨ (å¿…éœ€)

## ğŸ“ ä¹’ä¹“çƒ VR è¾“å…¥ç³»ç»Ÿè®¾è®¡

### 3. ä¹’ä¹“çƒæ¸¸æˆè¾“å…¥éœ€æ±‚åˆ†æ

#### 3.1 æ ¸å¿ƒæ¸¸æˆäº¤äº’

- **çƒæ‹æ§åˆ¶**: ç²¾ç¡®çš„ 6DOF ä½ç½®å’Œæ—‹è½¬è¿½è¸ª
- **å‡»çƒåŠ¨ä½œ**: çƒæ‹ä¸çƒçš„ç‰©ç†æ¥è§¦
- **å‘çƒç³»ç»Ÿ**: åŸºäºç‰©ç†äº¤äº’çš„çƒç”Ÿæˆå’ŒæŠ›çƒæ£€æµ‹
- **ç§»åŠ¨ç³»ç»Ÿ**: ç©å®¶ä½ç½®è°ƒæ•´å’Œç¬ç§»
- **èœå•äº¤äº’**: æ¸¸æˆè®¾ç½®å’ŒçŠ¶æ€æ§åˆ¶

#### 3.2 VR äº¤äº’ç‰¹æ€§

- **è‡ªç„¶æ‰‹éƒ¨åŠ¨ä½œ**: æ¨¡æ‹ŸçœŸå®ä¹’ä¹“çƒåŠ¨ä½œ
- **ç‰©ç†æŠ›çƒ**: æ— æŒ‰é”®çš„è‡ªç„¶æŠ›çƒäº¤äº’
- **åŒæ‰‹åè°ƒ**: å·¦å³æ‰‹å¯ä»¥åˆ†åˆ«æŒæ‹
- **ç©ºé—´å®šä½**: åˆ©ç”¨ VR æˆ¿é—´è§„æ¨¡è¿½è¸ª
- **è§¦è§‰åé¦ˆ**: å‡»çƒæ—¶çš„éœ‡åŠ¨åé¦ˆ

#### 3.3 å‘çƒç³»ç»Ÿè®¾è®¡ç†å¿µ

**è‡ªç„¶ç‰©ç†äº¤äº’**:

- çƒåœ¨æ‰‹éƒ¨é”šç‚¹ä½ç½®ç”Ÿæˆ
- é€šè¿‡æ‰‹æŸ„åŠ é€Ÿè¿åŠ¨è‡ªç„¶æŠ›å‡ºçƒ
- åŸºäºç¢°æ’å’Œç›¸å¯¹ä½ç½®åˆ¤æ–­æŠ›çƒåŠ¨ä½œ
- ç¬¦åˆçœŸå®ä¹’ä¹“çƒå‘çƒè§„åˆ™çš„æŠ›çƒéªŒè¯

### 4. PongHub è¾“å…¥åŠ¨ä½œè®¾è®¡

#### 4.1 Player åŠ¨ä½œç»„è®¾è®¡

```json
{
  "name": "Player",
  "actions": [
    {
      "name": "LeftPaddleGrip",
      "type": "Button",
      "description": "å·¦æ‰‹çƒæ‹æŠ“å–/é‡Šæ”¾"
    },
    {
      "name": "RightPaddleGrip",
      "type": "Button",
      "description": "å³æ‰‹çƒæ‹æŠ“å–/é‡Šæ”¾"
    },
    {
      "name": "GenerateServeBall",
      "type": "Button",
      "description": "ç”Ÿæˆå‘çƒçƒä½“ï¼ˆä»…åœ¨å‘çƒæƒæ—¶ï¼‰"
    },
    {
      "name": "Teleport",
      "type": "Button",
      "description": "ç¬ç§»ç§»åŠ¨"
    },
    {
      "name": "TeleportDirection",
      "type": "Value",
      "description": "ç¬ç§»æ–¹å‘"
    },
    {
      "name": "SnapTurn",
      "type": "Value",
      "description": "å¿«é€Ÿè½¬èº«"
    },
    {
      "name": "Menu",
      "type": "Button",
      "description": "æ¸¸æˆèœå•"
    },
    {
      "name": "PauseSinglePlayer",
      "type": "Button",
      "description": "æš‚åœæ¸¸æˆï¼ˆä»…å•æœºæ¨¡å¼ï¼‰"
    },
    {
      "name": "ResetPosition",
      "type": "Button",
      "description": "é‡ç½®ç©å®¶ä½ç½®"
    }
  ]
}
```

#### 4.2 Spectator åŠ¨ä½œç»„è®¾è®¡

```json
{
  "name": "Spectator",
  "actions": [
    {
      "name": "SelectPlayer",
      "type": "Button",
      "description": "é€‰æ‹©è§‚çœ‹çš„ç©å®¶"
    },
    {
      "name": "ChangeView",
      "type": "Button",
      "description": "åˆ‡æ¢è§‚çœ‹è§†è§’"
    },
    {
      "name": "Applause",
      "type": "Button",
      "description": "é¼“æŒåŠ¨ä½œ"
    },
    {
      "name": "Cheer",
      "type": "Button",
      "description": "æ¬¢å‘¼åŠ¨ä½œ"
    },
    {
      "name": "Menu",
      "type": "Button",
      "description": "è§‚ä¼—èœå•"
    }
  ]
}
```

### 5. å‘çƒç³»ç»Ÿè¯¦ç»†è®¾è®¡

#### 5.1 çƒä½“ç”Ÿæˆæœºåˆ¶

**ç”Ÿæˆæ¡ä»¶**:

- ç©å®¶æ‹¥æœ‰å‘çƒæƒ
- æŒ‰ä¸‹ç”Ÿæˆå‘çƒçƒä½“æŒ‰é”®
- æ‰‹éƒ¨é”šç‚¹ä½ç½®æ— å…¶ä»–çƒä½“

**ç”Ÿæˆä½ç½®**:

```csharp
public class ServeBallGenerator : MonoBehaviour
{
    [Header("å‘çƒé…ç½®")]
    [SerializeField] private Transform m_servingHandAnchor; // å‘çƒæ‰‹é”šç‚¹
    [SerializeField] private Vector3 m_ballSpawnOffset = new Vector3(0, 0.05f, 0.03f); // çƒç”Ÿæˆåç§»
    [SerializeField] private float m_ballAttachmentRadius = 0.02f; // é™„ç€åŠå¾„

    public void GenerateServeBall()
    {
        if (!CanGenerateServeBall()) return;

        Vector3 spawnPosition = m_servingHandAnchor.position +
                               m_servingHandAnchor.TransformDirection(m_ballSpawnOffset);

        GameObject ball = BallPool.Instance.GetBall();
        ball.transform.position = spawnPosition;

        // è®¾ç½®çƒä¸ºé™„ç€çŠ¶æ€
        BallAttachment attachment = ball.GetComponent<BallAttachment>();
        attachment.AttachToHand(m_servingHandAnchor);
    }
}
```

#### 5.2 ç‰©ç†æŠ›çƒæ£€æµ‹

**æŠ›çƒåŠ¨ä½œè¯†åˆ«**:

```csharp
public class ThrowDetection : MonoBehaviour
{
    [Header("æŠ›çƒæ£€æµ‹å‚æ•°")]
    [SerializeField] private float m_minThrowVelocity = 1.0f; // æœ€å°æŠ›çƒé€Ÿåº¦
    [SerializeField] private float m_detachDistance = 0.1f; // åˆ†ç¦»è·ç¦»é˜ˆå€¼
    [SerializeField] private float m_velocityThreshold = 0.5f; // é€Ÿåº¦é˜ˆå€¼

    private Vector3 m_lastHandPosition;
    private Vector3 m_handVelocity;
    private bool m_ballAttached = false;

    private void Update()
    {
        if (m_ballAttached)
        {
            UpdateHandVelocity();
            CheckThrowConditions();
        }
    }

    private void UpdateHandVelocity()
    {
        Vector3 currentPosition = m_servingHandAnchor.position;
        m_handVelocity = (currentPosition - m_lastHandPosition) / Time.deltaTime;
        m_lastHandPosition = currentPosition;
    }

    private void CheckThrowConditions()
    {
        // æ£€æŸ¥æ‰‹éƒ¨ä¸çƒçš„è·ç¦»
        float distanceToBall = Vector3.Distance(m_servingHandAnchor.position, m_attachedBall.transform.position);

        // æ£€æŸ¥æ‰‹éƒ¨åŠ é€Ÿåº¦ï¼ˆæŠ›çƒåŠ¨ä½œï¼‰
        bool hasThrowMotion = m_handVelocity.magnitude > m_minThrowVelocity;
        bool isDetached = distanceToBall > m_detachDistance;

        if (hasThrowMotion && isDetached)
        {
            ExecuteThrow();
        }
    }

    private void ExecuteThrow()
    {
        // åˆ†ç¦»çƒä½“
        BallAttachment attachment = m_attachedBall.GetComponent<BallAttachment>();
        attachment.DetachFromHand();

        // åº”ç”¨æŠ›çƒé€Ÿåº¦
        Rigidbody ballRb = m_attachedBall.GetComponent<Rigidbody>();
        ballRb.velocity = m_handVelocity;

        // å¦‚æœæ˜¯å‘çƒç¯èŠ‚ï¼ŒéªŒè¯æŠ›çƒåˆè§„æ€§
        if (m_isServing)
        {
            ValidateServeThrow();
        }

        m_ballAttached = false;
    }
}
```

#### 5.3 å‘çƒè§„åˆ™éªŒè¯

**æŠ›çƒåˆè§„æ€§æ£€æŸ¥**:

```csharp
public class ServeValidation : MonoBehaviour
{
    [Header("å‘çƒè§„åˆ™å‚æ•°")]
    [SerializeField] private float m_minThrowHeight = 0.16f; // æœ€å°æŠ›çƒé«˜åº¦(16cm)
    [SerializeField] private float m_maxVerticalDeviation = 15f; // æœ€å¤§åç¦»ç«–ç›´è§’åº¦
    [SerializeField] private float m_validationTime = 2f; // éªŒè¯æ—¶é—´çª—å£

    private Vector3 m_throwStartPosition;
    private Vector3 m_throwDirection;
    private bool m_isValidating = false;

    public void ValidateServeThrow()
    {
        m_throwStartPosition = m_attachedBall.transform.position;
        m_throwDirection = m_handVelocity.normalized;
        m_isValidating = true;

        StartCoroutine(ValidateThrowTrajectory());
    }

    private IEnumerator ValidateThrowTrajectory()
    {
        float elapsedTime = 0f;
        float maxHeight = m_throwStartPosition.y;
        Vector3 initialPosition = m_throwStartPosition;

        while (elapsedTime < m_validationTime && m_isValidating)
        {
            Vector3 currentPosition = m_attachedBall.transform.position;

            // è®°å½•æœ€å¤§é«˜åº¦
            if (currentPosition.y > maxHeight)
            {
                maxHeight = currentPosition.y;
            }

            elapsedTime += Time.deltaTime;
            yield return null;
        }

        // éªŒè¯æŠ›çƒé«˜åº¦
        float throwHeight = maxHeight - initialPosition.y;
        bool heightValid = throwHeight >= m_minThrowHeight;

        // éªŒè¯æŠ›çƒæ–¹å‘ï¼ˆç›¸å¯¹äºç«–ç›´æ–¹å‘çš„è§’åº¦ï¼‰
        Vector3 verticalDirection = Vector3.up;
        float angle = Vector3.Angle(m_throwDirection, verticalDirection);
        bool directionValid = angle <= m_maxVerticalDeviation;

        // å‘é€éªŒè¯ç»“æœ
        bool isValidServe = heightValid && directionValid;
        OnServeValidationComplete?.Invoke(isValidServe, throwHeight, angle);

        if (!isValidServe)
        {
            // æ˜¾ç¤ºè¿è§„æç¤º
            ShowServeViolation(heightValid, directionValid, throwHeight, angle);
        }
    }

    private void ShowServeViolation(bool heightValid, bool directionValid, float actualHeight, float actualAngle)
    {
        string violationMessage = "å‘çƒè¿è§„: ";

        if (!heightValid)
        {
            violationMessage += $"æŠ›çƒé«˜åº¦ä¸è¶³ ({actualHeight:F2}m < {m_minThrowHeight}m) ";
        }

        if (!directionValid)
        {
            violationMessage += $"æŠ›çƒæ–¹å‘åç¦»è¿‡å¤§ ({actualAngle:F1}Â° > {m_maxVerticalDeviation}Â°)";
        }

        UIManager.Instance?.ShowViolationNotice(violationMessage);
    }

    // äº‹ä»¶
    public System.Action<bool, float, float> OnServeValidationComplete;
}
```

### 6. æš‚åœç³»ç»Ÿè®¾è®¡

#### 6.1 æš‚åœåŠŸèƒ½é€‚ç”¨æ€§

**å•æœºæ¨¡å¼æš‚åœ**:

- âœ… æ”¯æŒæš‚åœåŠŸèƒ½
- å¯ä»¥æš‚åœæ¸¸æˆæ—¶é—´
- å¯ä»¥æš‚åœç‰©ç†æ¨¡æ‹Ÿ
- å¯ä»¥æ˜¾ç¤ºæš‚åœèœå•

**å¤šäººæ¨¡å¼é™åˆ¶**:

- âŒ ä¸æ”¯æŒæš‚åœåŠŸèƒ½
- å®æ—¶ç½‘ç»œå¯¹æˆ˜æ— æ³•æš‚åœ
- åªèƒ½é€€å‡ºå½“å‰å¯¹å±€
- å¯ä»¥æ˜¾ç¤ºæ¸¸æˆé€‰é¡¹èœå•ï¼ˆä¸æš‚åœæ¸¸æˆï¼‰

#### 6.2 æš‚åœç³»ç»Ÿå®ç°

```csharp
public class PauseManager : MonoBehaviour
{
    [Header("æš‚åœé…ç½®")]
    [SerializeField] private bool m_isSinglePlayerMode = true;
    [SerializeField] private GameObject m_pauseMenuPrefab;
    [SerializeField] private GameObject m_optionsMenuPrefab;

    private bool m_isPaused = false;
    private GameObject m_currentMenu;

    public void TogglePause()
    {
        if (m_isSinglePlayerMode)
        {
            ToggleSinglePlayerPause();
        }
        else
        {
            ShowMultiplayerOptions();
        }
    }

    private void ToggleSinglePlayerPause()
    {
        m_isPaused = !m_isPaused;

        if (m_isPaused)
        {
            // æš‚åœæ¸¸æˆ
            Time.timeScale = 0f;

            // æš‚åœç‰©ç†
            Physics.simulationMode = SimulationMode.Script;

            // æ˜¾ç¤ºæš‚åœèœå•
            m_currentMenu = Instantiate(m_pauseMenuPrefab);

            // ç¦ç”¨æ¸¸æˆè¾“å…¥
            GameInputManager.Instance?.DisableGameplayInputs();
        }
        else
        {
            // æ¢å¤æ¸¸æˆ
            Time.timeScale = 1f;

            // æ¢å¤ç‰©ç†
            Physics.simulationMode = SimulationMode.FixedUpdate;

            // éšè—æš‚åœèœå•
            if (m_currentMenu != null)
            {
                Destroy(m_currentMenu);
            }

            // å¯ç”¨æ¸¸æˆè¾“å…¥
            GameInputManager.Instance?.EnableGameplayInputs();
        }
    }

    private void ShowMultiplayerOptions()
    {
        // å¤šäººæ¨¡å¼ä¸‹æ˜¾ç¤ºé€‰é¡¹èœå•ï¼ˆä¸æš‚åœæ¸¸æˆï¼‰
        if (m_currentMenu == null)
        {
            m_currentMenu = Instantiate(m_optionsMenuPrefab);
        }
        else
        {
            Destroy(m_currentMenu);
            m_currentMenu = null;
        }
    }

    public bool CanPause()
    {
        return m_isSinglePlayerMode && GameManager.Instance.IsGameActive();
    }
}
```

### 7. å®Œæ•´çš„ PongHub.inputactions é…ç½®

```json
{
  "name": "PongHub",
  "maps": [
    {
      "name": "Player",
      "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
      "actions": [
        {
          "name": "LeftPaddleGrip",
          "type": "Button",
          "id": "11111111-1111-1111-1111-111111111111",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": true
        },
        {
          "name": "RightPaddleGrip",
          "type": "Button",
          "id": "22222222-2222-2222-2222-222222222222",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": true
        },
        {
          "name": "GenerateServeBall",
          "type": "Button",
          "id": "33333333-3333-3333-3333-333333333333",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "Teleport",
          "type": "Button",
          "id": "55555555-5555-5555-5555-555555555555",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "TeleportDirection",
          "type": "Value",
          "id": "66666666-6666-6666-6666-666666666666",
          "expectedControlType": "Vector2",
          "processors": "",
          "interactions": "",
          "initialStateCheck": true
        },
        {
          "name": "SnapTurn",
          "type": "Value",
          "id": "77777777-7777-7777-7777-777777777777",
          "expectedControlType": "Vector2",
          "processors": "",
          "interactions": "Sector(directions=4)",
          "initialStateCheck": true
        },
        {
          "name": "Menu",
          "type": "Button",
          "id": "88888888-8888-8888-8888-888888888888",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "PauseSinglePlayer",
          "type": "Button",
          "id": "99999999-9999-9999-9999-999999999999",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "ResetPosition",
          "type": "Button",
          "id": "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "Hold(duration=1.0)",
          "initialStateCheck": false
        }
      ],
      "bindings": [
        {
          "name": "",
          "id": "bind-left-grip",
          "path": "<XRController>{LeftHand}/gripPressed",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "LeftPaddleGrip",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-right-grip",
          "path": "<XRController>{RightHand}/gripPressed",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "RightPaddleGrip",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-generate-ball",
          "path": "<XRController>{LeftHand}/triggerPressed",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "GenerateServeBall",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-teleport",
          "path": "<XRController>{RightHand}/triggerPressed",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "Teleport",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-teleport-dir",
          "path": "<XRController>{RightHand}/primary2DAxis",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "TeleportDirection",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-snap-turn",
          "path": "<XRController>{LeftHand}/primary2DAxis",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "SnapTurn",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-menu",
          "path": "<XRController>/menuButton",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "Menu",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-pause",
          "path": "<XRController>/start",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "PauseSinglePlayer",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "bind-reset",
          "path": "<XRController>{RightHand}/secondaryButton",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "ResetPosition",
          "isComposite": false,
          "isPartOfComposite": false
        }
      ]
    },
    {
      "name": "Spectator",
      "id": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb",
      "actions": [
        {
          "name": "SelectPlayer",
          "type": "Button",
          "id": "cccccccc-cccc-cccc-cccc-cccccccccccc",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "ChangeView",
          "type": "Button",
          "id": "dddddddd-dddd-dddd-dddd-dddddddddddd",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "Applause",
          "type": "Button",
          "id": "eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "Cheer",
          "type": "Button",
          "id": "ffffffff-ffff-ffff-ffff-ffffffffffff",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        },
        {
          "name": "Menu",
          "type": "Button",
          "id": "12121212-1212-1212-1212-121212121212",
          "expectedControlType": "Button",
          "processors": "",
          "interactions": "",
          "initialStateCheck": false
        }
      ],
      "bindings": [
        {
          "name": "",
          "id": "spec-select",
          "path": "<XRController>{LeftHand}/triggerPressed",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "SelectPlayer",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "spec-view",
          "path": "<XRController>{RightHand}/triggerPressed",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "ChangeView",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "spec-applause",
          "path": "<XRController>{LeftHand}/primaryButton",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "Applause",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "spec-cheer",
          "path": "<XRController>{RightHand}/primaryButton",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "Cheer",
          "isComposite": false,
          "isPartOfComposite": false
        },
        {
          "name": "",
          "id": "spec-menu",
          "path": "<XRController>/menuButton",
          "interactions": "",
          "processors": "",
          "groups": "XR",
          "action": "Menu",
          "isComposite": false,
          "isPartOfComposite": false
        }
      ]
    }
  ],
  "controlSchemes": [
    {
      "name": "XR",
      "bindingGroup": "XR",
      "devices": [
        {
          "devicePath": "<XRController>{LeftHand}",
          "isOptional": false,
          "isOR": false
        },
        {
          "devicePath": "<XRController>{RightHand}",
          "isOptional": false,
          "isOR": false
        }
      ]
    }
  ]
}
```

## ğŸ”§ å®ç°æ–¹æ¡ˆ

### 8. è¾“å…¥ç³»ç»Ÿé›†æˆæ­¥éª¤

#### 8.1 åˆ›å»ºæ–°çš„è¾“å…¥åŠ¨ä½œæ–‡ä»¶

1. **åˆ›å»º PongHub.inputactions æ–‡ä»¶**

   ```text
   è·¯å¾„: Assets/PongHub/Configs/PongHub.inputactions
   ```

2. **å¯¼å…¥åˆ° Unity è¾“å…¥ç³»ç»Ÿ**

   ```csharp
   // åœ¨é¡¹ç›®è®¾ç½®ä¸­æ›¿æ¢é»˜è®¤è¾“å…¥åŠ¨ä½œ
   Project Settings > XR Plug-in Management > Input Actions
   ```

#### 8.2 ä»£ç é›†æˆ

**PongHubInputManager.cs**:

```csharp
using UnityEngine;
using UnityEngine.InputSystem;
using PongHub.Gameplay.Paddle;
using PongHub.Gameplay.Ball;

namespace PongHub.Input
{
    public class PongHubInputManager : MonoBehaviour
    {
        [Header("è¾“å…¥åŠ¨ä½œå¼•ç”¨")]
        [SerializeField] private InputActionAsset m_inputActions;

        // åŠ¨ä½œç»„å¼•ç”¨
        private InputActionMap m_playerActions;
        private InputActionMap m_spectatorActions;

        // å…·ä½“åŠ¨ä½œå¼•ç”¨
        private InputAction m_leftPaddleGrip;
        private InputAction m_rightPaddleGrip;
        private InputAction m_generateServeBall;
        private InputAction m_teleport;
        private InputAction m_snapTurn;
        private InputAction m_menu;
        private InputAction m_pauseSinglePlayer;

        // ç»„ä»¶å¼•ç”¨
        [SerializeField] private Paddle m_leftPaddle;
        [SerializeField] private Paddle m_rightPaddle;
        [SerializeField] private ServeBallGenerator m_ballGenerator;
        [SerializeField] private PauseManager m_pauseManager;

        private void Awake()
        {
            InitializeInputActions();
            BindInputEvents();
        }

        private void InitializeInputActions()
        {
            m_playerActions = m_inputActions.FindActionMap("Player");
            m_spectatorActions = m_inputActions.FindActionMap("Spectator");

            // è·å–å…·ä½“åŠ¨ä½œ
            m_leftPaddleGrip = m_playerActions.FindAction("LeftPaddleGrip");
            m_rightPaddleGrip = m_playerActions.FindAction("RightPaddleGrip");
            m_generateServeBall = m_playerActions.FindAction("GenerateServeBall");
            m_teleport = m_playerActions.FindAction("Teleport");
            m_snapTurn = m_playerActions.FindAction("SnapTurn");
            m_menu = m_playerActions.FindAction("Menu");
            m_pauseSinglePlayer = m_playerActions.FindAction("PauseSinglePlayer");
        }

        private void BindInputEvents()
        {
            // çƒæ‹æŠ“å–
            m_leftPaddleGrip.performed += OnLeftPaddleGrip;
            m_leftPaddleGrip.canceled += OnLeftPaddleRelease;

            m_rightPaddleGrip.performed += OnRightPaddleGrip;
            m_rightPaddleGrip.canceled += OnRightPaddleRelease;

            // å‘çƒç³»ç»Ÿ
            m_generateServeBall.performed += OnGenerateServeBall;

            // ç§»åŠ¨ç³»ç»Ÿ
            m_teleport.performed += OnTeleport;
            m_snapTurn.performed += OnSnapTurn;

            // èœå•ç³»ç»Ÿ
            m_menu.performed += OnMenu;
            m_pauseSinglePlayer.performed += OnPauseSinglePlayer;
        }

        private void OnEnable()
        {
            m_playerActions?.Enable();
        }

        private void OnDisable()
        {
            m_playerActions?.Disable();
        }

        // è¾“å…¥äº‹ä»¶å¤„ç†
        private void OnLeftPaddleGrip(InputAction.CallbackContext context)
        {
            m_leftPaddle?.SetGripState(PaddleGripState.Anchored);
        }

        private void OnLeftPaddleRelease(InputAction.CallbackContext context)
        {
            m_leftPaddle?.SetGripState(PaddleGripState.Free);
        }

        private void OnRightPaddleGrip(InputAction.CallbackContext context)
        {
            m_rightPaddle?.SetGripState(PaddleGripState.Anchored);
        }

        private void OnRightPaddleRelease(InputAction.CallbackContext context)
        {
            m_rightPaddle?.SetGripState(PaddleGripState.Free);
        }

        private void OnGenerateServeBall(InputAction.CallbackContext context)
        {
            m_ballGenerator?.GenerateServeBall();
        }

        private void OnTeleport(InputAction.CallbackContext context)
        {
            // å®ç°ç¬ç§»é€»è¾‘
        }

        private void OnSnapTurn(InputAction.CallbackContext context)
        {
            Vector2 turnValue = context.ReadValue<Vector2>();
            // å®ç°å¿«é€Ÿè½¬èº«é€»è¾‘
        }

        private void OnMenu(InputAction.CallbackContext context)
        {
            // æ‰“å¼€æ¸¸æˆèœå•
        }

        private void OnPauseSinglePlayer(InputAction.CallbackContext context)
        {
            // ä»…åœ¨å•æœºæ¨¡å¼ä¸‹æš‚åœ
            if (m_pauseManager.CanPause())
            {
                m_pauseManager.TogglePause();
            }
        }

        // åˆ‡æ¢åˆ°è§‚ä¼—æ¨¡å¼
        public void SwitchToSpectatorMode()
        {
            m_playerActions.Disable();
            m_spectatorActions.Enable();
        }

        // åˆ‡æ¢åˆ°ç©å®¶æ¨¡å¼
        public void SwitchToPlayerMode()
        {
            m_spectatorActions.Disable();
            m_playerActions.Enable();
        }
    }
}
```

### 9. æ›¿æ¢è¾“å…¥é…ç½®æ­¥éª¤

#### 9.1 é¡¹ç›®é…ç½®æ›´æ–°

1. **å¤‡ä»½åŸå§‹é…ç½®**

   ```text
   å¤‡ä»½: Assets/PongHub/Configs/GloveBall.inputactions
   é‡å‘½åä¸º: GloveBall_Backup.inputactions
   ```

2. **åˆ›å»ºæ–°é…ç½®æ–‡ä»¶**

   ```text
   åˆ›å»º: Assets/PongHub/Configs/PongHub.inputactions
   ä½¿ç”¨ä¸Šè¿°JSONé…ç½®å†…å®¹
   ```

3. **æ›´æ–°é¡¹ç›®å¼•ç”¨**

   ```text
   // åœ¨é¡¹ç›®è®¾ç½®ä¸­æ›´æ–°
   Project Settings > Input System Package > Default Input Actions
   ä» GloveBall æ”¹ä¸º PongHub
   ```

#### 9.2 ä»£ç è¿ç§»

**æŸ¥æ‰¾å’Œæ›¿æ¢**:

```csharp
// æŸ¥æ‰¾æ‰€æœ‰å¯¹GloveBallçš„å¼•ç”¨
[SerializeField] private InputActionAsset gloveBallActions;

// æ›¿æ¢ä¸º
[SerializeField] private InputActionAsset pongHubActions;
```

**ç»„ä»¶æ›´æ–°**:

```csharp
// æ›´æ–°æ‰€æœ‰ä½¿ç”¨è¾“å…¥çš„ç»„ä»¶
- PaddleInput.cs
- PlayerController.cs
- MenuController.cs
- SpectatorController.cs
```

### 10. æµ‹è¯•éªŒè¯

#### 10.1 åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] å·¦æ‰‹çƒæ‹æŠ“å–/é‡Šæ”¾
- [ ] å³æ‰‹çƒæ‹æŠ“å–/é‡Šæ”¾
- [ ] å‘çƒçƒä½“ç”Ÿæˆ
- [ ] ç‰©ç†æŠ›çƒæ£€æµ‹
- [ ] å‘çƒè§„åˆ™éªŒè¯
- [ ] ç¬ç§»ç§»åŠ¨
- [ ] å¿«é€Ÿè½¬èº«
- [ ] èœå•æ‰“å¼€
- [ ] å•æœºæ¨¡å¼æš‚åœ
- [ ] å¤šäººæ¨¡å¼é€‰é¡¹èœå•
- [ ] è§‚ä¼—æ¨¡å¼åˆ‡æ¢

#### 10.2 å‘çƒç³»ç»Ÿä¸“é¡¹æµ‹è¯•

- [ ] çƒä½“åœ¨æ‰‹éƒ¨é”šç‚¹æ­£ç¡®ç”Ÿæˆ
- [ ] æŠ›çƒåŠ¨ä½œæ­£ç¡®è¯†åˆ«
- [ ] æŠ›çƒé«˜åº¦éªŒè¯ï¼ˆ>16cmï¼‰
- [ ] æŠ›çƒè§’åº¦éªŒè¯ï¼ˆ<15Â° åå·®ï¼‰
- [ ] è¿è§„æç¤ºæ­£ç¡®æ˜¾ç¤º
- [ ] åˆè§„å‘çƒæ­£å¸¸è¿›è¡Œ

#### 10.3 æš‚åœåŠŸèƒ½æµ‹è¯•

**å•æœºæ¨¡å¼**:

- [ ] æ¸¸æˆæ­£ç¡®æš‚åœï¼ˆtimeScale = 0ï¼‰
- [ ] ç‰©ç†æ¨¡æ‹Ÿæ­£ç¡®æš‚åœ
- [ ] æš‚åœèœå•æ­£ç¡®æ˜¾ç¤º
- [ ] æ¸¸æˆè¾“å…¥æ­£ç¡®ç¦ç”¨
- [ ] æ¢å¤æ¸¸æˆåŠŸèƒ½æ­£å¸¸

**å¤šäººæ¨¡å¼**:

- [ ] æš‚åœæŒ‰é”®è§¦å‘é€‰é¡¹èœå•
- [ ] æ¸¸æˆç»§ç»­è¿è¡Œä¸æš‚åœ
- [ ] é€‰é¡¹èœå•åŠŸèƒ½æ­£å¸¸
- [ ] é€€å‡ºé€‰é¡¹æ­£ç¡®å·¥ä½œ

#### 10.4 å…¼å®¹æ€§æµ‹è¯•

- [ ] Oculus Quest 2
- [ ] Oculus Quest 3
- [ ] Meta Quest Pro
- [ ] PC VR (SteamVR)

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Input ç³»ç»Ÿå®ç°.md](./Inputç³»ç»Ÿå®ç°.md)
- [çƒæ‹å’Œä¹’ä¹“çƒç½‘ç»œåŒæ­¥æŠ€æœ¯æ–‡æ¡£.md](./çƒæ‹å’Œä¹’ä¹“çƒç½‘ç»œåŒæ­¥æŠ€æœ¯æ–‡æ¡£.md)
- [PongHub é¢„åˆ¶ä»¶æ•´æ”¹è§„æ ¼ä¹¦.md](./PongHubé¢„åˆ¶ä»¶æ•´æ”¹è§„æ ¼ä¹¦.md)
- [ä¹’ä¹“çƒçœŸå®ç‰©ç†.md](./ä¹’ä¹“çƒçœŸå®ç‰©ç†.md)

## ğŸ¯ æ€»ç»“

é€šè¿‡åˆ†æ GloveBall çš„è¾“å…¥é…ç½®ï¼Œæˆ‘ä»¬ä¸ºä¹’ä¹“çƒ VR æ¸¸æˆè®¾è®¡äº†æ›´åŠ ä¸“ä¸šå’Œè‡ªç„¶çš„è¾“å…¥ç³»ç»Ÿã€‚æ–°çš„è¾“å…¥é…ç½®ä¸“é—¨é’ˆå¯¹ä¹’ä¹“çƒè¿åŠ¨çš„ç‰¹ç‚¹ï¼Œæä¾›äº†æ›´ç²¾ç¡®çš„çƒæ‹æ§åˆ¶ã€æ›´è‡ªç„¶çš„å‘çƒä½“éªŒå’Œæ›´ä¸°å¯Œçš„äº¤äº’åŠŸèƒ½ã€‚

**ä¸»è¦æ”¹è¿›**:

1. **ç‰©ç†å‘çƒç³»ç»Ÿ**: æ— æŒ‰é”®çš„è‡ªç„¶æŠ›çƒäº¤äº’ï¼ŒåŸºäºç‰©ç†æ£€æµ‹çš„æŠ›çƒè¯†åˆ«
2. **å‘çƒè§„åˆ™éªŒè¯**: ç¬¦åˆçœŸå®ä¹’ä¹“çƒè§„åˆ™çš„æŠ›çƒé«˜åº¦å’Œè§’åº¦éªŒè¯
3. **æ™ºèƒ½æš‚åœæœºåˆ¶**: åŒºåˆ†å•æœºå’Œå¤šäººæ¨¡å¼çš„ä¸åŒæš‚åœç­–ç•¥
4. **åŒæ‰‹åè°ƒ**: æ”¯æŒå·¦å³æ‰‹ç‹¬ç«‹çƒæ‹æ§åˆ¶
5. **è§‚ä¼—äº’åŠ¨**: ä¸°å¯Œçš„è§‚ä¼—æ¨¡å¼äº¤äº’
6. **æ˜“äºæ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ä¾¿äºåç»­åŠŸèƒ½æ·»åŠ 

**å…³é”®ç‰¹æ€§**:

- **è‡ªç„¶äº¤äº’**: å‘çƒé‡‡ç”¨ç‰©ç†æŠ›çƒï¼Œæ— éœ€é¢å¤–æŒ‰é”®æ“ä½œ
- **è§„åˆ™åˆè§„**: ä¸¥æ ¼æŒ‰ç…§ä¹’ä¹“çƒå‘çƒè§„åˆ™è¿›è¡ŒéªŒè¯
- **æ¨¡å¼æ„ŸçŸ¥**: æ ¹æ®å•æœº/å¤šäººæ¨¡å¼æ™ºèƒ½è°ƒæ•´åŠŸèƒ½å¯ç”¨æ€§
- **ç”¨æˆ·å‹å¥½**: è¿è§„æ“ä½œæœ‰æ¸…æ™°çš„æç¤ºå’Œåé¦ˆ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0
**åˆ›å»ºæ—¥æœŸ**: [2025.06.25]
**æ›´æ–°æ—¥æœŸ**: [2025.06.25]
