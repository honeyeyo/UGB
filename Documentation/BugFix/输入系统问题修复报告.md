# è¾“å…¥ç³»ç»Ÿé—®é¢˜ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æ€»è§ˆ

åœ¨ Unity ç¼–è¾‘å™¨ä¸­è¿è¡Œ Startup åœºæ™¯æ—¶é‡åˆ°å¤šä¸ªè­¦å‘Šå’Œé”™è¯¯ï¼Œä¸»è¦åˆ†ä¸ºå››ç±»ï¼š

1. **CS0414 ç¼–è¯‘è­¦å‘Š** - æœªä½¿ç”¨çš„å­—æ®µ
2. **NullReferenceException** - ç©ºå¼•ç”¨å¼‚å¸¸
3. **Oculus äº¤äº’ç³»ç»Ÿé…ç½®é—®é¢˜** - PointableCanvasModule ç›¸å…³é”™è¯¯
4. **Adaptive Performance é…ç½®è­¦å‘Š** - æœªæ‰¾åˆ°æ´»è·ƒçš„åŠ è½½å™¨
5. **Unity Netcode è­¦å‘Š** - ç½‘ç»œé¢„åˆ¶ä½“é…ç½®é—®é¢˜

## ä¿®å¤å†…å®¹

### 1. ç¼–è¯‘è­¦å‘Šä¿®å¤ (CS0414)

#### å·²ç§»é™¤çš„æœªä½¿ç”¨å­—æ®µï¼š

**ServeBallController.cs**

- `m_minThrowHeight` - æœ€å°æŠ›çƒé«˜åº¦ï¼ˆæœªå®ç°åŠŸèƒ½ï¼‰
- `m_maxThrowAngle` - æœ€å¤§æŠ›çƒè§’åº¦åå·®ï¼ˆæœªå®ç°åŠŸèƒ½ï¼‰
- `m_isTrackingThrow` - å‘çƒçŠ¶æ€è·Ÿè¸ªï¼ˆæœªå®ç°åŠŸèƒ½ï¼‰

**PaddleController.cs**

- `m_jointSpring` - å…³èŠ‚å¼¹æ€§ï¼ˆæœªä½¿ç”¨çš„ç‰©ç†å‚æ•°ï¼‰
- `m_jointDamper` - å…³èŠ‚é˜»å°¼ï¼ˆæœªä½¿ç”¨çš„ç‰©ç†å‚æ•°ï¼‰

**ServeValidator.cs**

- `throwValidationTime` - æŠ›çƒåŠ¨ä½œéªŒè¯æ—¶é—´ï¼ˆæœªå®ç°åŠŸèƒ½ï¼‰
- `ballReleaseDetectionRadius` - çƒé‡Šæ”¾æ£€æµ‹åŠå¾„ï¼ˆæœªå®ç°åŠŸèƒ½ï¼‰

**EditorInputSimulator.cs**

- `enableInBuild` - æ„å»ºç‰ˆæœ¬å¯ç”¨æ ‡å¿—ï¼ˆæ„å»ºç‰ˆæœ¬ä¸­å¼ºåˆ¶ç¦ç”¨ï¼‰
- `controllerRotateSpeed` - æ§åˆ¶å™¨æ—‹è½¬é€Ÿåº¦ï¼ˆæœªä½¿ç”¨å‚æ•°ï¼‰

**PongHubInputManager.cs**

- `m_hasContinuousInputChanged` - è¿ç»­è¾“å…¥å˜åŒ–æ ‡å¿—ï¼ˆæœªä½¿ç”¨çš„æ€§èƒ½ä¼˜åŒ–å˜é‡ï¼‰

### 2. ç©ºå¼•ç”¨å¼‚å¸¸ä¿®å¤

#### PongHubInputManager.UnbindInputEvents()

**é—®é¢˜**: åœ¨ OnDisable æ—¶è°ƒç”¨è§£ç»‘äº‹ä»¶æ–¹æ³•ï¼Œä½†æ­¤æ—¶æŸäº› InputAction å¯èƒ½å·²ç»ä¸º null

**è§£å†³æ–¹æ¡ˆ**: ä¸ºæ‰€æœ‰ InputAction æ·»åŠ  null æ£€æŸ¥

```csharp
// ä¿®å¤å‰
m_leftPaddleGripAction.performed -= OnLeftPaddleGripPerformed;

// ä¿®å¤å
if (m_leftPaddleGripAction != null)
{
    m_leftPaddleGripAction.performed -= OnLeftPaddleGripPerformed;
    m_leftPaddleGripAction.canceled -= OnLeftPaddleGripCanceled;
}
```

### 3. Adaptive Performance è­¦å‘Šä¿®å¤

#### é—®é¢˜åˆ†æ

**è­¦å‘Šä¿¡æ¯**: `[Adaptive Performance] No Active Loader was found. Make sure to select your loader in the Adaptive Performance Settings for this platform.`

**æ ¹æœ¬åŸå› **:

- URP æ¸²æŸ“ç®¡çº¿å¯ç”¨äº† Adaptive Performance (`m_UseAdaptivePerformance: 1`)
- ä½†é¡¹ç›®ä¸­æ²¡æœ‰é…ç½®ä»»ä½• Adaptive Performance æä¾›è€…
- æ‰€æœ‰å¹³å°çš„åŠ è½½å™¨æ•°ç»„éƒ½ä¸ºç©ºï¼š`m_Loaders: []`

#### è§£å†³æ–¹æ¡ˆ

**é€‰æ‹©æ–¹æ¡ˆ 1: ç¦ç”¨ Adaptive Performanceï¼ˆæ¨èï¼‰**

**åŸå› **:

- Adaptive Performance ä¸»è¦ç”¨äº Android ç§»åŠ¨è®¾å¤‡çš„åŠ¨æ€æ€§èƒ½è°ƒæ•´
- VR æ¸¸æˆé€šå¸¸è¿è¡Œåœ¨ç›¸å¯¹ç¨³å®šçš„ç¡¬ä»¶ç¯å¢ƒä¸­ï¼ˆQuestã€PCï¼‰
- ä¸éœ€è¦åŠ¨æ€è°ƒæ•´æ¸²æŸ“è´¨é‡æ¥ç»´æŒæ€§èƒ½
- ç¦ç”¨å¯ä»¥å‡å°‘ç³»ç»Ÿå¼€é”€å’Œå¤æ‚æ€§

**ä¿®å¤æ“ä½œ**:

```
æ–‡ä»¶: Assets/Settings/Ultra_PipelineAsset.asset
ä¿®æ”¹: m_UseAdaptivePerformance: 1 â†’ m_UseAdaptivePerformance: 0
```

### 4. Unity Netcode è­¦å‘Šä¿®å¤

#### ğŸ”¶ é—®é¢˜æè¿°

```
[Netcode] NetworkPrefab cannot be null (NetworkPrefab at index: -1)
[Netcode] Removing invalid prefabs from Network Prefab registration:
{SourceHash: 0, TargetHash: 0} Ã— 7ä¸ªæ— æ•ˆæ¡ç›®
```

#### ğŸ” æ ¹æºåˆ†æ

**é—®é¢˜æ–‡ä»¶**: `Assets/PongHub/Prefabs/App/NetworkPrefabs-36440.asset`

- åŒ…å« 10 ä¸ªç½‘ç»œé¢„åˆ¶ä½“æ¡ç›®
- å…¶ä¸­ 7 ä¸ªé¢„åˆ¶ä½“æ–‡ä»¶å·²è¢«åˆ é™¤ï¼ˆé¡¹ç›®é‡æ„æ—¶æ¸…ç†ï¼‰
- é…ç½®æ–‡ä»¶æœªåŠæ—¶æ›´æ–°ï¼Œå¯¼è‡´ GUID å¼•ç”¨å¤±æ•ˆ

#### âœ… ä¿®å¤æ–¹æ¡ˆ

**æ“ä½œ**: æ¸…ç†æ— æ•ˆçš„é¢„åˆ¶ä½“å¼•ç”¨
**ä¿®æ”¹**: ä» 10 ä¸ªæ¡ç›®å‡å°‘åˆ° 3 ä¸ªæœ‰æ•ˆæ¡ç›®

**ä¿ç•™çš„æœ‰æ•ˆç½‘ç»œé¢„åˆ¶ä½“**:

1. **NetworkSession** (guid: 9659024587d9c5946a05574857d30bdb)
   - æ ¸å¿ƒç½‘ç»œä¼šè¯ç®¡ç†
2. **PlayerAvatarEntity** (guid: ae8adc48da668a243b09e965993d2c6d)
   - VR ç©å®¶åŒ–èº«å’Œ Avatar ç³»ç»Ÿ
3. **SpectatorNet** (guid: faf18a0a765c8bd4982f73dca48b9189)
   - è§‚ä¼—ç½‘ç»œå¯¹è±¡

**ç§»é™¤çš„æ— æ•ˆå¼•ç”¨**:

- 7 ä¸ªå·²åˆ é™¤çš„çƒç±»é¢„åˆ¶ä½“ GUID å¼•ç”¨
- è¿™äº›é¢„åˆ¶ä½“å¯èƒ½ç”¨äºç‰¹æ®Šæ¸¸æˆæ¨¡å¼æˆ–å·²å¼ƒç”¨åŠŸèƒ½

#### ğŸ“Š ä¿®å¤æ•ˆæœ

- âœ… æ¶ˆé™¤ Netcode è­¦å‘Šä¿¡æ¯
- âœ… ç½‘ç»œç³»ç»Ÿæ­£å¸¸åˆå§‹åŒ–
- âœ… æ ¸å¿ƒå¤šäººåŠŸèƒ½ä¿æŒå®Œæ•´
- âœ… å•æœºæ¸¸æˆä¸å—å½±å“

## Oculus äº¤äº’ç³»ç»Ÿé…ç½®é—®é¢˜

### é—®é¢˜ç°è±¡

```
NullReferenceException: Object reference not set to an instance of an object
Oculus.Interaction.PointableCanvasModule.OnEnable()
Oculus.Interaction.Input.FromOVRControllerDataSource.OnEnable()
Oculus.Interaction.Input.FromOVRHmdDataSource.OnEnable()
```

### å¯èƒ½åŸå› 

1. **PointableCanvasModule ç»„ä»¶ç¼ºå¤±**: UI äº¤äº’ç³»ç»Ÿæœªæ­£ç¡®é…ç½®
2. **OVR æ•°æ®æºé…ç½®é”™è¯¯**: æ§åˆ¶å™¨å’Œå¤´æ˜¾æ•°æ®æºå¼•ç”¨é—®é¢˜
3. **åœºæ™¯é…ç½®ä¸åŒ¹é…**: Startup åœºæ™¯ä¸ CameraRig é¢„åˆ¶ä½“é…ç½®ä¸ä¸€è‡´

### å»ºè®®è§£å†³æ–¹æ¡ˆ

1. **æ£€æŸ¥ CameraRig é¢„åˆ¶ä½“**: ç¡®ä¿åŒ…å«å®Œæ•´çš„ Oculus äº¤äº’ç»„ä»¶
2. **éªŒè¯åœºæ™¯é…ç½®**: æ£€æŸ¥ Startup åœºæ™¯ä¸­çš„ PointableCanvasModule é…ç½®
3. **é‡æ–°å¯¼å…¥ Oculus åŒ…**: å¦‚æœé—®é¢˜æŒç»­ï¼Œè€ƒè™‘é‡æ–°å¯¼å…¥ Meta XR SDK

## ä¿®å¤éªŒè¯

### âœ… å·²è§£å†³çš„é—®é¢˜

- [x] CS0414 ç¼–è¯‘è­¦å‘Š - å…¨éƒ¨æ¸…é™¤
- [x] PongHubInputManager ç©ºå¼•ç”¨å¼‚å¸¸ - å·²ä¿®å¤
- [x] Adaptive Performance è­¦å‘Š - å·²ç¦ç”¨
- [x] Unity Netcode ç½‘ç»œé¢„åˆ¶ä½“è­¦å‘Š - å·²æ¸…ç†

### ğŸ”„ éœ€è¦åœ¨ Unity ç¼–è¾‘å™¨ä¸­éªŒè¯çš„é—®é¢˜

- [ ] Oculus äº¤äº’ç³»ç»Ÿç©ºå¼•ç”¨å¼‚å¸¸ - éœ€è¦æ£€æŸ¥åœºæ™¯é…ç½®
- [ ] PointableCanvasModule é…ç½® - éœ€è¦æ‰‹åŠ¨éªŒè¯

### ğŸ§ª æµ‹è¯•å»ºè®®

1. **é‡æ–°å¯åŠ¨ Unity ç¼–è¾‘å™¨**éªŒè¯ä¿®å¤æ•ˆæœ
2. **è¿è¡Œ Startup åœºæ™¯**æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
3. **æµ‹è¯• VR äº¤äº’åŠŸèƒ½**ç¡®ä¿æ‰‹æŸ„å’Œæ‰‹éƒ¨è¿½è¸ªæ­£å¸¸
4. **å¤šäººç½‘ç»œæµ‹è¯•**éªŒè¯ NetworkPrefabs ä¿®å¤æ•ˆæœ

## æ€§èƒ½å’Œç¨³å®šæ€§å½±å“

### ç§¯æå½±å“

- **ç¼–è¯‘é€Ÿåº¦æå‡**: ç§»é™¤æœªä½¿ç”¨å­—æ®µå‡å°‘è­¦å‘Š
- **è¿è¡Œæ—¶ç¨³å®šæ€§**: ç©ºå¼•ç”¨å¼‚å¸¸ä¿®å¤æå‡ç¨³å®šæ€§
- **ç½‘ç»œæ€§èƒ½**: æ¸…ç†æ— æ•ˆç½‘ç»œé¢„åˆ¶ä½“å‡å°‘åˆå§‹åŒ–å¼€é”€
- **VR æ€§èƒ½**: ç¦ç”¨ä¸å¿…è¦çš„ Adaptive Performance å‡å°‘ CPU å¼€é”€

### é£é™©è¯„ä¼°

- **é£é™©çº§åˆ«**: ğŸŸ¢ ä½é£é™©
- **å‘åå…¼å®¹**: âœ… å®Œå…¨å…¼å®¹
- **åŠŸèƒ½æŸå¤±**: âŒ æ— åŠŸèƒ½æŸå¤±
- **æµ‹è¯•è¦†ç›–**: ğŸ”„ éœ€è¦éªŒè¯ VR äº¤äº’å’Œç½‘ç»œåŠŸèƒ½

## æ€»ç»“

**ä¿®å¤çŠ¶æ€**: ğŸ¯ å¤§éƒ¨åˆ†é—®é¢˜å·²è§£å†³
**ä¼˜å…ˆçº§**: é«˜ä¼˜å…ˆçº§é—®é¢˜å·²ä¿®å¤ï¼Œå‰©ä½™ä¸ºé…ç½®éªŒè¯é—®é¢˜
**å»ºè®®**: ç»§ç»­ç›‘æ§ Oculus äº¤äº’ç³»ç»Ÿï¼Œå¿…è¦æ—¶æ£€æŸ¥åœºæ™¯é…ç½®

---

**ä¿®å¤æ—¶é—´**: 2025 å¹´ 7 æœˆ 1 æ—¥
**ä¿®å¤ç±»å‹**: ä»£ç æ¸…ç† + é…ç½®ä¿®å¤
**å½±å“èŒƒå›´**: ç¼–è¯‘è­¦å‘Šã€è¿è¡Œæ—¶å¼‚å¸¸ã€ç½‘ç»œé…ç½®
**ä¸‹ä¸€æ­¥**: éªŒè¯ VR äº¤äº’ç³»ç»Ÿé…ç½®
